# Environment
APP_ENV=local
LOG_LEVEL=INFO
SERVICE_NAME=tx-lookup-service

# Local Docker Compose defaults
DATABASE_URL=postgresql+psycopg://bo:bo@localhost:5432/bo
KAFKA_BROKERS=localhost:9092
KAFKA_SECURITY_PROTOCOL=PLAINTEXT
KAFKA_SASL_MECHANISM=PLAIN
KAFKA_SASL_USERNAME=
KAFKA_SASL_PASSWORD=
KAFKA_SSL_CA_LOCATION=
KAFKA_GROUP_ID=bo-sync-consumer
# Event profile id (loaded once at process start, restart required to change)
EVENT_PROFILE_ID=canonical-v1
# Optional per-topic override (priority: env > profile > default)
LEDGER_TOPIC=ledger.entry.upserted
PAYMENT_ORDER_TOPIC=payment.order.upserted
# DLQ backend: file (default for local/dev) or db (default for prod)
DLQ_BACKEND=file
DLQ_PATH=./dlq/failed_events.jsonl
DLQ_RETENTION_DAYS=14
CONSUMER_POLL_TIMEOUT_MS=1000
CONSUMER_OFFSET_RESET=earliest

# Auth (disabled by default)
AUTH_MODE=disabled
AUTH_ISSUER=
AUTH_AUDIENCE=
AUTH_JWKS_URL=
AUTH_ALGORITHM=RS256
AUTH_ROLES_CLAIM=roles,scp
AUTH_ACTOR_ID_CLAIMS=oid,sub
AUDIT_MASK_QUERY_KEYS=access_token,token

# DB pool tuning
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800

# Observability
METRICS_HOST=0.0.0.0
METRICS_PORT=9108
DB_SLOW_QUERY_MS=200
